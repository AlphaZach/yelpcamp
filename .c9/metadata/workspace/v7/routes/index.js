{"filter":false,"title":"index.js","tooltip":"/v7/routes/index.js","undoManager":{"mark":8,"position":8,"stack":[[{"start":{"row":0,"column":0},"end":{"row":48,"column":3},"action":"insert","lines":["app.get(\"/\", function(req, res){","    res.render(\"landing\");","});","","","","","","","// ===================","// AUTH ROUTES","// ===================","","//show register form","app.get(\"/register\", function(req, res){","    res.render(\"register\");","});","","//handle sign in logic","app.post(\"/register\", function(req, res){","    var newUser = User({username: req.body.username});","    User.register(newUser, req.body.password, function(err, user){","        if(err){","            console.log(err);","            return res.render(\"register\");","        }","        passport.authenticate(\"local\")(req, res, function(){","           res.redirect(\"/campgrounds\") ;","        });","    });","});","","//show login form","app.get(\"/login\", function(req, res){","    res.render(\"login\");","});","// handling login logic","app.post(\"/login\", passport.authenticate(\"local\", ","    {","        successRedirect: \"/campgrounds\",","        failureRedirect: \"/login\"","    }), function(req, res){","});","","// logic Routes ","app.get(\"/logout\", function(req, res){","    req.logout();","    res.redirect(\"/campgrounds\");","});"],"id":1}],[{"start":{"row":7,"column":0},"end":{"row":8,"column":0},"action":"remove","lines":["",""],"id":2}],[{"start":{"row":6,"column":0},"end":{"row":7,"column":0},"action":"remove","lines":["",""],"id":3}],[{"start":{"row":5,"column":0},"end":{"row":6,"column":0},"action":"remove","lines":["",""],"id":4}],[{"start":{"row":4,"column":0},"end":{"row":5,"column":0},"action":"remove","lines":["",""],"id":5}],[{"start":{"row":3,"column":0},"end":{"row":4,"column":0},"action":"remove","lines":["",""],"id":6}],[{"start":{"row":8,"column":20},"end":{"row":8,"column":21},"action":"insert","lines":[" "],"id":7}],[{"start":{"row":0,"column":0},"end":{"row":43,"column":3},"action":"remove","lines":["app.get(\"/\", function(req, res){","    res.render(\"landing\");","});","","// ===================","// AUTH ROUTES","// ===================","","//show register form ","app.get(\"/register\", function(req, res){","    res.render(\"register\");","});","","//handle sign in logic","app.post(\"/register\", function(req, res){","    var newUser = User({username: req.body.username});","    User.register(newUser, req.body.password, function(err, user){","        if(err){","            console.log(err);","            return res.render(\"register\");","        }","        passport.authenticate(\"local\")(req, res, function(){","           res.redirect(\"/campgrounds\") ;","        });","    });","});","","//show login form","app.get(\"/login\", function(req, res){","    res.render(\"login\");","});","// handling login logic","app.post(\"/login\", passport.authenticate(\"local\", ","    {","        successRedirect: \"/campgrounds\",","        failureRedirect: \"/login\"","    }), function(req, res){","});","","// logic Routes ","app.get(\"/logout\", function(req, res){","    req.logout();","    res.redirect(\"/campgrounds\");","});"],"id":8},{"start":{"row":0,"column":0},"end":{"row":55,"column":1},"action":"insert","lines":["app.get(\"/\", function(req, res){","    res.render(\"landing\");","});","","","","","","","// ===================","// AUTH ROUTES","// ===================","","//show register form","app.get(\"/register\", function(req, res){","    res.render(\"register\");","});","","//handle sign in logic","app.post(\"/register\", function(req, res){","    var newUser = User({username: req.body.username});","    User.register(newUser, req.body.password, function(err, user){","        if(err){","            console.log(err);","            return res.render(\"register\");","        }","        passport.authenticate(\"local\")(req, res, function(){","           res.redirect(\"/campgrounds\") ;","        });","    });","});","","//show login form","app.get(\"/login\", function(req, res){","    res.render(\"login\");","});","// handling login logic","app.post(\"/login\", passport.authenticate(\"local\", ","    {","        successRedirect: \"/campgrounds\",","        failureRedirect: \"/login\"","    }), function(req, res){","});","","// logic Routes ","app.get(\"/logout\", function(req, res){","    req.logout();","    res.redirect(\"/campgrounds\");","});","","function isLoggedIn(req, res, next){","    if(req.isAuthenticated()){","        return next();","    }","    res.redirect(\"/login\");","}"]}],[{"start":{"row":0,"column":0},"end":{"row":55,"column":1},"action":"remove","lines":["app.get(\"/\", function(req, res){","    res.render(\"landing\");","});","","","","","","","// ===================","// AUTH ROUTES","// ===================","","//show register form","app.get(\"/register\", function(req, res){","    res.render(\"register\");","});","","//handle sign in logic","app.post(\"/register\", function(req, res){","    var newUser = User({username: req.body.username});","    User.register(newUser, req.body.password, function(err, user){","        if(err){","            console.log(err);","            return res.render(\"register\");","        }","        passport.authenticate(\"local\")(req, res, function(){","           res.redirect(\"/campgrounds\") ;","        });","    });","});","","//show login form","app.get(\"/login\", function(req, res){","    res.render(\"login\");","});","// handling login logic","app.post(\"/login\", passport.authenticate(\"local\", ","    {","        successRedirect: \"/campgrounds\",","        failureRedirect: \"/login\"","    }), function(req, res){","});","","// logic Routes ","app.get(\"/logout\", function(req, res){","    req.logout();","    res.redirect(\"/campgrounds\");","});","","function isLoggedIn(req, res, next){","    if(req.isAuthenticated()){","        return next();","    }","    res.redirect(\"/login\");","}"],"id":9},{"start":{"row":0,"column":0},"end":{"row":56,"column":24},"action":"insert","lines":["var express = require(\"express\");","var router  = express.Router();","var passport = require(\"passport\");","var User = require(\"../models/user\");","","//root route","router.get(\"/\", function(req, res){","    res.render(\"landing\");","});","","// show register form","router.get(\"/register\", function(req, res){","   res.render(\"register\"); ","});","","//handle sign up logic","router.post(\"/register\", function(req, res){","    var newUser = new User({username: req.body.username});","    User.register(newUser, req.body.password, function(err, user){","        if(err){","            console.log(err);","            return res.render(\"register\");","        }","        passport.authenticate(\"local\")(req, res, function(){","           res.redirect(\"/campgrounds\"); ","        });","    });","});","","//show login form","router.get(\"/login\", function(req, res){","   res.render(\"login\"); ","});","","//handling login logic","router.post(\"/login\", passport.authenticate(\"local\", ","    {","        successRedirect: \"/campgrounds\",","        failureRedirect: \"/login\"","    }), function(req, res){","});","","// logout route","router.get(\"/logout\", function(req, res){","   req.logout();","   res.redirect(\"/campgrounds\");","});","","//middleware","function isLoggedIn(req, res, next){","    if(req.isAuthenticated()){","        return next();","    }","    res.redirect(\"/login\");","}","","module.exports = router;"]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":29,"column":15},"end":{"row":29,"column":15},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1488178050542,"hash":"22fb40e7a58175afbaa4062a39b7034914125ed7"}